<route lang="json5" type="page">
{
  layout: 'default',
  style: {
    navigationStyle: 'custom',
    navigationBarTitleText: 'é¦–é¡µ',
  },
}
</route>

<template>
  <view class="min-h-screen" :style="{ marginTop: safeAreaInsets?.top + 'px' }">
    <!-- é¡¶éƒ¨æ ‡é¢˜ -->
    <wd-navbar
      fixed
      title="å®¢æœ"
      safeAreaInsetTop
      custom-style="background-color: #c6ddfe !important;"
      :bordered="false"
    />

    <!-- ç”¨æˆ·ä¿¡æ¯åŒºåŸŸ -->
    <view class="flex items-center px-5 mt-12">
      <wd-img class="shadow-md" :width="80" :height="80" round :src="userAvatar" />
      <view class="ml-4">
        <view class="text-lg font-medium fw-600">æ¸…èŒ¶</view>
        <view class="text-gray-400">ID: 107229</view>
      </view>
    </view>

    <!-- è´¦æˆ·ä½™é¢å¡ç‰‡ -->
    <view class="flex justify-center mt-6 z-11">
      <view class="balance-card w-[80%] p-3 rounded-t-[10px] bg-[#ffddb0]">
        <view class="flex justify-between items-center fw-700">
          <text class="text-28rpx ml-2">è´¦æˆ·ä½™é¢: {{ balance }} å…ƒ</text>
          <text class="fw-500 text-26rpx text-black">æˆ‘çš„èµ„äº§ ></text>
        </view>
      </view>
    </view>

    <!-- åŠŸèƒ½åˆ—è¡¨ -->
    <view class="mx-4 bg-white rounded-md">
      <view
        v-for="(item, index) in menuList"
        :key="index"
        class="menu-item z-999 flex justify-between items-center p-4"
        @click="handleMenuItemClick(item)"
      >
        <view class="flex items-center">
          <text class="text-blue-500 mr-2">{{ item.icon }}</text>
          <text>{{ item.title }}</text>
        </view>
        <text class="text-gray-400">></text>
      </view>
    </view>

    <!-- é€€å‡ºæŒ‰é’® -->
    <view class="mx-4 mt-6 flex justify-center">
      <button class="w-[90%] bg-blue-500 text-white py-1 rounded-full">é€€å‡º / åˆ‡æ¢è´¦å·</button>
    </view>
  </view>
</template>

<script lang="ts" setup>
const balance = ref(68)
const { safeAreaInsets } = uni.getSystemInfoSync()

const userAvatar = '../../static/user.svg'

interface MenuItem {
  icon: string
  title: string
}

const menuList: Array<MenuItem> = [
  { icon: 'ğŸ‘¤', title: 'æˆ‘çš„è´¦æˆ·' },
  { icon: 'ğŸš¢', title: 'æˆ‘çš„èˆ¹èˆ¶' },
  { icon: 'ğŸ”’', title: 'ä¿®æ”¹å¯†ç ' },
  { icon: 'â¤ï¸', title: 'ç§¯åˆ†å…¬ç¤º' },
  { icon: 'ğŸ“„', title: 'ç”µå­å‘ç¥¨' },
  { icon: 'ğŸ“–', title: 'ç”¨æˆ·æŒ‡å—' },
  { icon: 'ğŸ’¬', title: 'ä½¿ç”¨åé¦ˆ' },
  { icon: 'ğŸ¢', title: 'å…³äºæˆ‘ä»¬' },
]

function handleMenuItemClick(item: MenuItem) {
  console.log('ç‚¹å‡»äº†', item.title)
  if (item.title === 'æˆ‘çš„è´¦æˆ·') {
    uni.navigateTo({ url: '/pages/my-account/index' })
  }
}
</script>

<style>
page {
  background: linear-gradient(180deg, #c4dcfe 0%, #f5f5f5 45%, #f5f5f5 100%);
}
/* #ifdef MP-WEIXIN */
page {
  height: 100%;
  overflow: scroll;
  background: linear-gradient(180deg, #c4dcfe 0%, #f5f5f5 45%, #f5f5f5 100%);
}
/* #endif */
</style>

<style lang="scss">
.menu-item {
  position: relative;
}

.menu-item::after {
  position: absolute;
  right: 16px;
  bottom: 0;
  left: 16px;
  height: 1px;
  content: '';
  background-color: #f3f4f6; /* å¯¹åº” border-gray-100 çš„é¢œè‰² */
}
/* æœ€åä¸€ä¸ªå…ƒç´ ä¸æ˜¾ç¤ºè¾¹æ¡† */
.menu-item:last-child::after {
  display: none;
}

.balance-card {
  position: relative;
}

.balance-card::before {
  position: absolute;
  top: 59%;
  left: -11rpx;
  width: 0;
  height: 0;
  content: '';
  border-top: 36px solid transparent;
  border-right: 7px solid #e8b881; /* è“è‰²ä¸‰è§’å½¢ï¼Œæ”¹ä¸ºæŒ‡å‘å³è¾¹ */
  border-bottom: 0px solid transparent;
  transform: translateY(-50%);
}
</style>
